/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 01-sep.-2023 6:43:47 				*/
/*  DBMS       : PostgreSQL 						*/
/* ---------------------------------------------------- */

/* Drop Sequences for Autonumber Columns */

DROP SEQUENCE IF EXISTS person_id_seq
;

DROP SEQUENCE IF EXISTS client_id_seq
;

/* Drop Tables */

DROP TABLE IF EXISTS ACCOUNT CASCADE
;

DROP TABLE IF EXISTS TRANSACTION CASCADE
;


/* Create Tables */
CREATE TABLE ACCOUNT
(
	ID bigint NOT NULL,
    client_id_number varchar(50) NULL,
    password varchar(1) NULL,
    account_number varchar(1) NULL,
    account_type varchar(20) NULL,
    initial_balance double precision NULL,
    status bool NOT NULL,
    AUD_CREATED_AT timestamp without time zone NOT NULL,
    AUD_UPDATED_AT timestamp without time zone NULL
)
;

CREATE TABLE TRANSACTION
(
    ID bigint NOT NULL,
    transaction_date timestamp without time zone NOT NULL,
    transaction_type varchar(20) NULL,
    value double precision NULL,
    balance double precision NULL,
    account_Id bigint NOT NULL,
    AUD_CREATED_AT timestamp without time zone NOT NULL,
    AUD_UPDATED_AT timestamp without time zone NULL
)
;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE ACCOUNT ADD CONSTRAINT PK_ACCOUNT
	PRIMARY KEY (ID)
;

ALTER TABLE TRANSACTION ADD CONSTRAINT PK_TRANSACTION
	PRIMARY KEY (ID)
;

CREATE INDEX IXFK_ACCOUNT ON TRANSACTION (account_Id ASC)
;


/* Create Foreign Key Constraints */

ALTER TABLE TRANSACTION ADD CONSTRAINT FK_TRANSACTION_ID
	FOREIGN KEY (account_Id) REFERENCES ACCOUNT (ID)
;


/* Create Table Comments, Sequences for Autonumber Columns */

CREATE SEQUENCE account_id_seq INCREMENT 1 START 1
;
CREATE SEQUENCE transaction_id_seq INCREMENT 1 START 1
;

COMMENT ON TABLE TRANSACTION
	IS 'TRANSACTION Table id and password must not be null'
;

COMMENT ON TABLE ACCOUNT
	IS 'ACCOUNT Table'
;
